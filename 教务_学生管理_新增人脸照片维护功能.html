<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学生信息管理系统 - 人脸照片管理</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", sans-serif;
        }
        
        body {
            background-color: #f0f2f5;
            display: flex;
            min-height: 100vh;
        }
        
        .sidebar {
            width: 200px;
            background-color: #fff;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            padding: 20px 0;
        }
        
        .grade-list {
            list-style: none;
        }
        
        .grade-list li {
            padding: 12px 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .grade-list li:hover {
            background-color: #f0f7ff;
        }
        
        .grade-list li.active {
            background-color: #e6f7ff;
            border-left: 3px solid #1890ff;
            color: #1890ff;
            font-weight: bold;
        }
        
        .main-content {
            flex: 1;
            padding: 20px;
        }
        
        .container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e8e8e8;
        }
        
        .class-name {
            font-size: 20px;
            color: #1890ff;
            font-weight: bold;
        }
        
        .search-box {
            display: flex;
            align-items: center;
        }
        
        .search-box input {
            padding: 8px 12px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            width: 200px;
            margin-right: 10px;
        }
        
        .search-box button {
            background-color: #1890ff;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 15px;
            cursor: pointer;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e8e8e8;
        }
        
        th {
            background-color: #f5f7fa;
            color: #333;
            font-weight: 600;
        }
        
        tr:hover {
            background-color: #f5f7fa;
        }
        
        .gender-icon {
            margin-left: 8px;
            font-size: 14px;
        }
        
        .male {
            color: #1890ff;
        }
        
        .female {
            color: #f759ab;
        }
        
        .face-photo {
            width: 40px;
            height: 40px;
            border-radius: 4px;
            object-fit: cover;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .face-photo:hover {
            transform: scale(1.1);
        }
        
        .no-photo {
            width: 40px;
            height: 40px;
            background-color: #f5f5f5;
            border: 1px dashed #d9d9d9;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 12px;
        }
        
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .btn {
            padding: 5px 10px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-size: 12px;
        }
        
        .btn-view {
            background-color: #52c41a;
            color: white;
        }
        
        .btn-upload {
            background-color: #1890ff;
            color: white;
        }
        
        .btn-replace {
            background-color: #faad14;
            color: white;
        }
        
        /* 模态框样式 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }
        
        .modal-photo {
            max-width: 100%;
            max-height: 400px;
            margin: 15px 0;
        }
        
        .modal-buttons {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        
        .modal-buttons button {
            padding: 8px 15px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
        }
        
        .btn-close {
            background-color: #f5f5f5;
            color: #333;
        }
        
        .btn-delete {
            background-color: #ff4d4f;
            color: white;
        }
        
        /* 上传模态框样式 */
        .upload-modal {
            display: none;
        }
        
        .upload-area {
            border: 2px dashed #d9d9d9;
            border-radius: 8px;
            padding: 40px 20px;
            text-align: center;
            margin: 20px 0;
            cursor: pointer;
            transition: border-color 0.3s;
        }
        
        .upload-area:hover {
            border-color: #1890ff;
        }
        
        .upload-icon {
            font-size: 48px;
            color: #d9d9d9;
            margin-bottom: 10px;
        }
        
        .preview-container {
            margin-top: 20px;
            text-align: center;
        }
        
        .preview-image {
            max-width: 200px;
            max-height: 200px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <ul class="grade-list">
            <li class="active">一年级</li>
            <li>二年级</li>
            <li>三年级</li>
            <li>四年级</li>
            <li>五年级</li>
            <li>六年级</li>
            <li>七年级</li>
            <li>八年级</li>
            <li>九年级</li>
            <li>十年级</li>
            <li>十一年级</li>
        </ul>
    </div>
    
    <div class="main-content">
        <div class="container">
            <div class="header">
                <div class="class-name">一年级1班</div>
                <div class="search-box">
                    <input type="text" placeholder="请输入学生姓名">
                    <button>搜索</button>
                </div>
            </div>
            
            <table>
                <thead>
                    <tr>
                        <th>姓名</th>
                        <th>人脸照片</th>
                        <th>启鸣号</th>
                        <th>生日</th>
                        <th>在校状态</th>
                        <th>选修课程</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            路博尧 <i class="fas fa-mars gender-icon male"></i>
                        </td>
                        <td>
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MCA0MCI+PGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTgiIGZpbGw9IiNmMGYyZjUiLz48Y2lyY2xlIGN4PSIyMCIgY3k9IjE2IiByPSI0IiBmaWxsPSIjYzBjNGNjIi8+PHBhdGggZD0iTTI4LDMwIEMyOCwyNCAyNCwyMCAyMCwyMCBDMTYsMjAgMTIsMjQgMTIsMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2MwYzRjYyIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9zdmc+" class="face-photo" alt="路博尧" onclick="previewPhoto(this)">
                        </td>
                        <td>1067</td>
                        <td>2018-11-01</td>
                        <td><span style="color: #52c41a;">在校</span></td>
                        <td>--</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-view">查看详情</button>
                                <button class="btn btn-replace" onclick="openUploadModal('路博尧', '1067')">更换照片</button>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            黄昕恬 <i class="fas fa-venus gender-icon female"></i>
                        </td>
                        <td>
                            <div class="no-photo">暂无</div>
                        </td>
                        <td>1074</td>
                        <td>2018-12-19</td>
                        <td><span style="color: #52c41a;">在校</span></td>
                        <td>--</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-view">查看详情</button>
                                <button class="btn btn-upload" onclick="openUploadModal('黄昕恬', '1074')">上传照片</button>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            范语彤 <i class="fas fa-venus gender-icon female"></i>
                        </td>
                        <td>
                            <div class="no-photo">暂无</div>
                        </td>
                        <td>1064</td>
                        <td>2019-01-17</td>
                        <td><span style="color: #52c41a;">在校</span></td>
                        <td>--</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-view">查看详情</button>
                                <button class="btn btn-upload" onclick="openUploadModal('范语彤', '1064')">上传照片</button>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            林希睿 <i class="fas fa-mars gender-icon male"></i>
                        </td>
                        <td>
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MCA0MCI+PGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTgiIGZpbGw9IiNmMGYyZjUiLz48Y2lyY2xlIGN4PSIyMCIgY3k9IjE2IiByPSI0IiBmaWxsPSIjYzBjNGNjIi8+PHBhdGggZD0iTTI4LDMwIEMyOCwyNCAyNCwyMCAyMCwyMCBDMTYsMjAgMTIsMjQgMTIsMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2MwYzRjYyIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9zdmc+" class="face-photo" alt="林希睿" onclick="previewPhoto(this)">
                        </td>
                        <td>1056</td>
                        <td>2019-08-10</td>
                        <td><span style="color: #52c41a;">在校</span></td>
                        <td>--</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-view">查看详情</button>
                                <button class="btn btn-replace" onclick="openUploadModal('林希睿', '1056')">更换照片</button>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            陈佳栋 <i class="fas fa-mars gender-icon male"></i>
                        </td>
                        <td>
                            <div class="no-photo">暂无</div>
                        </td>
                        <td>1071</td>
                        <td>2019-04-14</td>
                        <td><span style="color: #52c41a;">在校</span></td>
                        <td>--</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-view">查看详情</button>
                                <button class="btn btn-upload" onclick="openUploadModal('陈佳栋', '1071')">上传照片</button>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            高兴 <i class="fas fa-mars gender-icon male"></i>
                        </td>
                        <td>
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MCA0MCI+PGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTgiIGZpbGw9IiNmMGYyZjUiLz48Y2lyY2xlIGN4PSIyMCIgY3k9IjE2IiByPSI0IiBmaWxsPSIjYzBjNGNjIi8+PHBhdGggZD0iTTI4LDMwIEMyOCwyNCAyNCwyMCAyMCwyMCBDMTYsMjAgMTIsMjQgMTIsMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2MwYzRjYyIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9zdmc+" class="face-photo" alt="高兴" onclick="previewPhoto(this)">
                        </td>
                        <td>1073</td>
                        <td>2018-12-21</td>
                        <td><span style="color: #52c41a;">在校</span></td>
                        <td>--</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-view">查看详情</button>
                                <button class="btn btn-replace" onclick="openUploadModal('高兴', '1073')">更换照片</button>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            张恒瑜 <i class="fas fa-mars gender-icon male"></i>
                        </td>
                        <td>
                            <div class="no-photo">暂无</div>
                        </td>
                        <td>1047</td>
                        <td>2019-06-04</td>
                        <td><span style="color: #52c41a;">在校</span></td>
                        <td>--</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-view">查看详情</button>
                                <button class="btn btn-upload" onclick="openUploadModal('张恒瑜', '1047')">上传照片</button>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            蔡婧潼 <i class="fas fa-venus gender-icon female"></i>
                        </td>
                        <td>
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MCA0MCI+PGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTgiIGZpbGw9IiNmMGYyZjUiLz48Y2lyY2xlIGN4PSIyMCIgY3k9IjE2IiByPSI0IiBmaWxsPSIjYzBjNGNjIi8+PHBhdGggZD0iTTI4LDMwIEMyOCwyNCAyNCwyMCAyMCwyMCBDMTYsMjAgMTIsMjQgMTIsMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2MwYzRjYyIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9zdmc+" class="face-photo" alt="蔡婧潼" onclick="previewPhoto(this)">
                        </td>
                        <td>1066</td>
                        <td>2018-09-22</td>
                        <td><span style="color: #52c41a;">在校</span></td>
                        <td>--</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-view">查看详情</button>
                                <button class="btn btn-replace" onclick="openUploadModal('蔡婧潼', '1066')">更换照片</button>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            罗梓兮 <i class="fas fa-venus gender-icon female"></i>
                        </td>
                        <td>
                            <div class="no-photo">暂无</div>
                        </td>
                        <td>1062</td>
                        <td>2018-10-26</td>
                        <td><span style="color: #52c41a;">在校</span></td>
                        <td>--</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-view">查看详情</button>
                                <button class="btn btn-upload" onclick="openUploadModal('罗梓兮', '1062')">上传照片</button>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            乔子 <i class="fas fa-venus gender-icon female"></i>
                        </td>
                        <td>
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MCA0MCI+PGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTgiIGZpbGw9IiNmMGYyZjUiLz48Y2lyY2xlIGN4PSIyMCIgY3k9IjE2IiByPSI0IiBmaWxsPSIjYzBjNGNjIi8+PHBhdGggZD0iTTI4LDMwIEMyOCwyNCAyNCwyMCAyMCwyMCBDMTYsMjAgMTIsMjQgMTIsMzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2MwYzRjYyIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9zdmc+" class="face-photo" alt="乔子" onclick="previewPhoto(this)">
                        </td>
                        <td>1060</td>
                        <td>2019-08-08</td>
                       <td><span style="color: #52c41a;">在校</span></td>
                        <td>--</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-view">查看详情</button>
                                <button class="btn btn-replace" onclick="openUploadModal('乔子', '1060')">更换照片</button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- 照片预览模态框 -->
    <div id="previewModal" class="modal">
        <div class="modal-content">
            <h3 id="previewStudentName">学生姓名</h3>
            <img id="previewImage" class="modal-photo" src="" alt="学生照片">
            <div class="modal-buttons">
                <button class="btn-close" onclick="closePreviewModal()">关闭</button>
                <button class="btn-delete" onclick="deletePhoto()">删除照片</button>
            </div>
        </div>
    </div>
    
    <!-- 上传照片模态框 -->
    <div id="uploadModal" class="modal upload-modal">
        <div class="modal-content">
            <h3 id="uploadStudentName">为 [学生姓名] 上传照片</h3>
            <p>启鸣号: <span id="uploadStudentId">---</span></p>
            
            <div class="upload-area" onclick="document.getElementById('fileInput').click()">
                <div class="upload-icon">📁</div>
                <p>点击选择照片或拖拽文件到此处</p>
                <p style="font-size: 12px; color: #999;">支持 JPG、PNG 格式，大小不超过 2MB</p>
            </div>
            
            <input type="file" id="fileInput" accept="image/*" style="display: none;" onchange="handleFileSelect(this)">
            
            <div class="preview-container" id="previewContainer" style="display: none;">
                <h4>预览</h4>
                <img id="previewUpload" class="preview-image" src="" alt="预览">
            </div>
            
            <div class="modal-buttons">
                <button class="btn-close" onclick="closeUploadModal()">取消</button>
                <button id="confirmUpload" class="btn-upload" onclick="confirmUpload()" disabled>确认上传</button>
            </div>
        </div>
    </div>

    <script>
        // 当前操作的学生信息
        let currentStudent = {};
        
        // 打开照片预览模态框
        function previewPhoto(element) {
            if (element.classList.contains('face-photo')) {
                const studentRow = element.closest('tr');
                const studentName = studentRow.cells[0].textContent.trim();
                
                document.getElementById('previewStudentName').textContent = studentName;
                document.getElementById('previewImage').src = element.src;
                document.getElementById('previewModal').style.display = 'flex';
                
                // 存储当前学生信息
                currentStudent.name = studentName;
                currentStudent.id = studentRow.cells[2].textContent;
            }
        }
        
        // 关闭照片预览模态框
        function closePreviewModal() {
            document.getElementById('previewModal').style.display = 'none';
        }
        
        // 删除照片
        function deletePhoto() {
            if (confirm(`确定要删除 ${currentStudent.name} 的照片吗？`)) {
                // 在实际应用中，这里应该发送请求到服务器删除照片
                // 这里仅模拟删除效果
                const studentRow = findStudentRow(currentStudent.id);
                if (studentRow) {
                    const photoCell = studentRow.cells[1];
                    photoCell.innerHTML = '<div class="no-photo">暂无</div>';
                    
                    // 更新操作按钮
                    const actionCell = studentRow.cells[6];
                    actionCell.querySelector('.btn-replace').textContent = '上传照片';
                    actionCell.querySelector('.btn-replace').classList.replace('btn-replace', 'btn-upload');
                }
                
                closePreviewModal();
                alert('照片删除成功！');
            }
        }
        
        // 打开上传照片模态框
        function openUploadModal(studentName, studentId) {
            currentStudent.name = studentName;
            currentStudent.id = studentId;
            
            document.getElementById('uploadStudentName').textContent = `为 ${studentName} 上传照片`;
            document.getElementById('uploadStudentId').textContent = studentId;
            document.getElementById('uploadModal').style.display = 'flex';
            document.getElementById('previewContainer').style.display = 'none';
            document.getElementById('confirmUpload').disabled = true;
            
            // 重置文件输入
            document.getElementById('fileInput').value = '';
        }
        
        // 关闭上传照片模态框
        function closeUploadModal() {
            document.getElementById('uploadModal').style.display = 'none';
        }
        
        // 处理文件选择
        function handleFileSelect(input) {
            if (input.files && input.files[0]) {
                const file = input.files[0];
                
                // 检查文件类型和大小
                if (!file.type.match('image/jpeg') && !file.type.match('image/png')) {
                    alert('请选择 JPG 或 PNG 格式的图片！');
                    return;
                }
                
                if (file.size > 2 * 1024 * 1024) {
                    alert('图片大小不能超过 2MB！');
                    return;
                }
                
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    document.getElementById('previewUpload').src = e.target.result;
                    document.getElementById('previewContainer').style.display = 'block';
                    document.getElementById('confirmUpload').disabled = false;
                };
                
                reader.readAsDataURL(file);
            }
        }
        
        // 确认上传照片
        function confirmUpload() {
            // 在实际应用中，这里应该发送请求到服务器上传照片
            // 这里仅模拟上传效果
            const studentRow = findStudentRow(currentStudent.id);
            if (studentRow) {
                const photoCell = studentRow.cells[1];
                const previewSrc = document.getElementById('previewUpload').src;
                
                // 创建照片元素
                const img = document.createElement('img');
                img.src = previewSrc;
                img.className = 'face-photo';
                img.alt = currentStudent.name;
                img.onclick = function() { previewPhoto(this); };
                
                photoCell.innerHTML = '';
                photoCell.appendChild(img);
                
                // 更新操作按钮
                const actionCell = studentRow.cells[6];
                actionCell.querySelector('.btn-upload').textContent = '更换照片';
                actionCell.querySelector('.btn-upload').classList.replace('btn-upload', 'btn-replace');
            }
            
            closeUploadModal();
            alert('照片上传成功！');
        }
        
        // 根据学号查找学生行
        function findStudentRow(studentId) {
            const rows = document.querySelectorAll('tbody tr');
            for (let row of rows) {
                if (row.cells[2].textContent === studentId) {
                    return row;
                }
            }
            return null;
        }
        
        // 点击模态框外部关闭
        window.onclick = function(event) {
            const previewModal = document.getElementById('previewModal');
            const uploadModal = document.getElementById('uploadModal');
            
            if (event.target === previewModal) {
                closePreviewModal();
            }
            
            if (event.target === uploadModal) {
                closeUploadModal();
            }
        }
        
        // 年级列表点击事件
        document.querySelectorAll('.grade-list li').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.grade-list li').forEach(li => {
                    li.classList.remove('active');
                });
                this.classList.add('active');
                
                // 在实际应用中，这里应该加载对应年级的学生数据
                document.querySelector('.class-name').textContent = this.textContent + '1班';
            });
        });
    </script>
</body>
</html>